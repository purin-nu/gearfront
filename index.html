<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GEAR FRONT</title>

<style>
:root{
  --steam-bg:#1c1a18;
  --steam-panel:#2a2623;
  --steam-accent:#c46a1a;
  --steam-text:#f5c77a;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  background:#000;
  overflow:hidden;
  height:100svh;
  font-family: "Georgia", serif;
}

/* ===== 画面フィット用 ===== */
#viewport{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* ===== 盤面（設計サイズ固定） ===== */
.game-container{
  width:1280px;
  height:720px;
  background:radial-gradient(#2b2622,#141210);
  padding:10px;
  display:grid;
  grid-template-columns:1.2fr 3fr 1.2fr;
  grid-template-rows:0.9fr 2.4fr 1.3fr;
  gap:10px;
  transform-origin:center center;
}

/* ===== 共通パネル ===== */
.panel{
  background:linear-gradient(#2e2925,#1f1c19);
  border:4px solid var(--steam-accent);
  border-radius:14px;
  color:var(--steam-text);
  padding:10px;
  position:relative;
  overflow:hidden;
}

.title{
  font-weight:bold;
  letter-spacing:1px;
  margin-bottom:6px;
}

.score{
  position:absolute;
  top:10px;
  right:10px;
  border:2px solid var(--steam-accent);
  padding:4px 10px;
  border-radius:8px;
  font-weight:bold;
}

/* ===== 中央フィールド ===== */
.central-field{
  grid-column:1/4;
  position:relative;
}

.central-field::before{
  content:"";
  position:absolute;
  inset:8%;
  border:2px dashed rgba(255,170,80,0.3);
  border-radius:50%;
}

/* ===== カード ===== */
.card{
  width:90px;
  height:140px;
  background:linear-gradient(#d59a63,#b36a2b);
  border-radius:10px;
  color:#3a220f;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:48px;
  font-weight:bold;
  box-shadow: inset 0 0 0 4px rgba(0,0,0,0.2);
}

.card-row{
  display:flex;
  gap:12px;
}

/* ===== ボタン ===== */
button{
  background:linear-gradient(#c46a1a,#8a4510);
  border:none;
  color:#fff;
  padding:10px;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}

button:disabled{
  opacity:0.4;
}

/* ===== 状態 ===== */
.card-batted{ filter:grayscale(1) brightness(0.4); }
.card-scrapped{ filter:sepia(0.6) brightness(0.5); }
</style>
</head>

<body>
<div id="viewport">
  <div class="game-container">

    <!-- 左上 -->
    <div class="panel">
      <button id="initBtn">INITIALIZE</button>
      <button disabled>APPOINT CAPTAIN</button>
    </div>

    <!-- 上中央 -->
    <div class="panel">
      <div class="title">UNIT-03</div>
      <div class="score" id="score3">0</div>
    </div>

    <!-- 右上 -->
    <div class="panel">
      <div class="title">GEAR FRONT</div>
      <div style="font-size:12px;opacity:0.6;">TACTICAL GEAR OPERATION</div>
    </div>

    <!-- 中央 -->
    <div class="panel central-field" id="field">
      <div class="card-row" id="fieldCards"></div>
    </div>

    <!-- 左下 -->
    <div class="panel">
      <div class="title">ENGINE OUTPUT</div>
      <div style="font-size:42px;font-weight:bold;">MISSION</div>
      <div style="font-size:32px;">1 / 5</div>
    </div>

    <!-- 下中央 -->
    <div class="panel">
      <div class="title">PILOT UNIT-01 (YOU)</div>
      <div class="score" id="score1">0</div>
      <div class="card-row" id="hand"></div>
    </div>

    <!-- 右下 -->
    <div class="panel">
      <div class="title">TALON RESERVE</div>
      <div class="card-row"></div>
    </div>

  </div>
</div>

<script>
/* ===== フィット処理 ===== */
function fitToScreen(){
  const gc=document.querySelector('.game-container');
  const s=Math.min(
    window.innerWidth/1280,
    window.innerHeight/720
  );
  gc.style.transform=`scale(${s})`;
}
window.addEventListener('resize',fitToScreen);
window.addEventListener('orientationchange',fitToScreen);
fitToScreen();

/* ===== ゲーム簡易ロジック ===== */
const hand=[1,1,2,3,4];
const field=[2,3,5,1];

function render(){
  const h=document.getElementById('hand');
  const f=document.getElementById('fieldCards');
  h.innerHTML="";
  f.innerHTML="";

  hand.forEach(n=>{
    const c=document.createElement('div');
    c.className='card';
    c.textContent=n;
    h.appendChild(c);
  });

  field.forEach(n=>{
    const c=document.createElement('div');
    c.className='card';
    c.textContent=n;
    f.appendChild(c);
  });
}

/* ===== 加点判定 ===== */
function calcScore(){
  let score=0;

  // 2：場が4枚なら +3
  if(field.length===4 && field.includes(2)) score+=3;

  // 3：合計8以上なら +2
  if(field.reduce((a,b)=>a+b,0)>=8 && field.includes(3)) score+=2;

  // 4：2枚以下なら +2
  if(field.length<=2 && field.includes(4)) score+=2;

  // ? は加点しない（そもそも数値扱いしない）

  document.getElementById('score1').textContent=score;
}

render();
calcScore();
</script>
</body>
</html>
